(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const l=t=>`${Math.round(t/(1024*1024))} MB`,a=t=>{t.style.display="none",document.body.classList.remove("modal-open")},d=(t,r)=>{r.addEventListener("click",n=>{n.preventDefault(),t.style.display="flex",document.body.classList.add("modal-open")}),t.addEventListener("click",n=>n.target===t&&a(t)),document.querySelector(".modal-close").addEventListener("click",()=>a(t)),document.querySelector(".modal-button").addEventListener("click",()=>{a(t),window.location=r.href})},u=async t=>{try{const n=await(await fetch(`https://api.github.com/repos/electronfriends/wemp/contents/src/config.js?ref=${t.tag_name}`)).json();[...atob(n.content).matchAll(/name:\s*'([^']+)',\s*version:\s*'([^']+)'/g)].forEach(([,o,c])=>{const i=document.querySelector(`[data-service="${o}"]`);i&&(i.textContent=c)})}catch(r){console.error("Failed to fetch or parse config.js:",r),document.querySelectorAll(".version[data-service]").forEach(n=>{n.textContent="unavailable"})}};document.addEventListener("DOMContentLoaded",async()=>{var r;const t=document.querySelector(".download-button");try{const n=await fetch("https://api.github.com/repos/electronfriends/wemp/releases/latest");if(!n.ok)throw new Error(`GitHub API responded with status: ${n.status}`);const s=await n.json();if(((r=s.assets)==null?void 0:r.length)>0){const e=s.assets.find(c=>c.name.endsWith(".exe"));e&&(t.href=e.browser_download_url,document.querySelector(".download-size").textContent=l(e.size));const o=document.querySelector(".version-tag");o.textContent=s.tag_name,o.closest(".version-info").href=s.html_url,await u(s)}else throw new Error("No release assets found")}catch(n){console.error("Failed to fetch release data:",n),t.href="https://github.com/electronfriends/wemp/releases/latest",document.querySelector(".download-size").textContent="Visit GitHub",document.querySelectorAll(".version[data-service]").forEach(s=>{s.textContent="unavailable"})}d(document.getElementById("smartscreen-modal"),t)});
